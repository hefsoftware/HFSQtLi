<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HFSQtLi: Fetched data types</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HFSQtLi<span id="projectnumber">&#160;0.0.1</span>
   </div>
   <div id="projectbrief">A Qt/C++ wrapper for SQLite3.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Fetched data types </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This section describes the data types that are handled by the fetching functions (e.g. <a class="el" href="class_h_f_s_qt_li_1_1_query.html#a16cd25e34194d0c50466fb11d324450d" title="Performs a step on a query and fetches all the data.">Query::step</a>, Db::executeSingle, ...). Fetching a data type comes in two flavors: standard and strict. The strict mode checks for the type and range of retrived column to be compatible before fetching the data. If anything does not match an error will be returned by the corresponding call. The standard mode on the other hand just calls the API of the requested column type without performings any checks. </p>
<h1><a class="anchor" id="fetchnativedatatypes"></a>
Native data types</h1>
<p >Following types are directly mapped to sqlite_column_X calls </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> x;</div>
<div class="line"><span class="keywordtype">double</span> y;</div>
<div class="line">db-&gt;executeSingleAll(<span class="stringliteral">&quot;SELECT 3, 4.5&quot;</span>, x, y); <span class="comment">// x is 3, y is 4.5</span></div>
</div><!-- fragment --> <h2><a class="anchor" id="fetchinttypes"></a>
Integer types</h2>
<p >The following types are handled natively:</p><ul>
<li>qint8</li>
<li>quint8</li>
<li>qint16</li>
<li>quint16</li>
<li>qint32</li>
<li>quint32</li>
<li>qint64</li>
<li>quint64</li>
</ul>
<p >If retriving in strict mode the retrived column is checked to be of integer type and the range of the destination type is checked (e.g. fetching 129 in a qint8 will give an error).</p>
<p >Note: as SQLite stores only 64 bit signed integers the results of operations on 64 bit unsigned with the most signficant bit set is undefined </p>
<h2><a class="anchor" id="fetchfloattypes"></a>
Floating point</h2>
<p >The following types are handled natively:</p><ul>
<li>float</li>
<li>double</li>
</ul>
<p >In strict mode the column is checked to be a floating point. Also the float version checks that absolute value of retrived column is not between float_max and infinite (not inclusive) </p>
<h2><a class="anchor" id="fetchstringbytearray"></a>
Other native types</h2>
<p >The following types are handled natively:</p><ul>
<li>QString</li>
<li>QByteArray</li>
</ul>
<p >Text and blob data can be read respectively with QString and QByteArray </p>
<h1><a class="anchor" id="fetchcpptypes"></a>
C++ data types</h1>
<h2><a class="anchor" id="fetchoptional"></a>
std::optional&lt;T&gt;</h2>
<p >If the fetched column is NULL the result is cleared, othewise the value will be read as if the type T was read diredtly. </p><div class="fragment"><div class="line">std::optional&lt;int&gt; x,y;</div>
<div class="line">db-&gt;executeSingleAll(<span class="stringliteral">&quot;SELECT NULL, 3&quot;</span>, x, y); <span class="comment">// x is empty, y is 3</span></div>
</div><!-- fragment --> <h2><a class="anchor" id="fetchtuple"></a>
std::tuple&lt;T...&gt;</h2>
<p >If the fetched data is a tuple then the data is retrived as if each element of the tuple was retrived consecutevely.</p>
<p >E.g. </p><div class="fragment"><div class="line">std::tuple&lt;int, double, QString&gt; value;</div>
<div class="line">query.step(value);</div>
</div><!-- fragment --><p> is equivalent to </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> x;</div>
<div class="line"><span class="keywordtype">double</span> y;</div>
<div class="line">QString z;</div>
<div class="line">query.step(x, y, z);</div>
</div><!-- fragment --> <h1><a class="anchor" id="fetchothertypes"></a>
Other data types</h1>
<h2><a class="anchor" id="fetchunused"></a>
Unused</h2>
<p >Passing an Unused&lt;N&gt; parameters will consume N columns without fetching any data. No error will be returned except for checking the number of fetched columns. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> x, y;</div>
<div class="line">db-&gt;executeSingleAll(<span class="stringliteral">&quot;SELECT 1,2,3,4&quot;</span>, x, Unused&lt;2&gt;, y); <span class="comment">// x is 1, y is 4</span></div>
</div><!-- fragment --> <h2><a class="anchor" id="fetchcall"></a>
Call</h2>
<p >Passing a Call&lt;T...&gt;(f) parameter allows fetching data of type T... and call the corresponding function after the data is fetched. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="struct_h_f_s_qt_li_1_1_call.html" title="Template struct used to pass a callback that will be called upon fetching values.">Call</a> </dd></dl>
<h2><a class="anchor" id="fetchblob"></a>
Blob</h2>
<p >Passing a <a class="el" href="class_h_f_s_qt_li_1_1_blob.html" title="Provides direct read/write access to a blob.">Blob</a> to a column will behave differently depending on the column type.</p><ul>
<li>If column is a blob then the <a class="el" href="class_h_f_s_qt_li_1_1_blob.html#afa1121e19b2a2665263627053c9e962e" title="Sets the database name. If not set it will &quot;main&quot;.">Blob::setDatabase</a>, <a class="el" href="class_h_f_s_qt_li_1_1_blob.html#ae77930bbcc50461c172cab75d5931d5c" title="Returns current table name.">Blob::table</a> and <a class="el" href="class_h_f_s_qt_li_1_1_blob.html#a7aa7e76ec182b27412efca2b4bcf8d33" title="Sets the column name.">Blob::setColumn</a> will be called with the matching values of retrived column</li>
<li>If column is an integer <a class="el" href="class_h_f_s_qt_li_1_1_blob.html#a72eaac57ff170d189c3898b5f51de43b" title="Sets the row id.">Blob::setRowId</a> will be called. Passing a reference to a <a class="el" href="class_h_f_s_qt_li_1_1_blob.html" title="Provides direct read/write access to a blob.">Blob</a> in a column that is not a blob or integer gives an error in strict mode and is a no-op in standard mode </li>
</ul>
<h1><a class="anchor" id="fetchcustomtypes"></a>
Custom data types</h1>
<p >It is possible to handle the fetching of any data type T by implementing a function</p>
<p >void customFetch(CustomFetch &amp;fetch, T &amp;data)</p>
<p >This function will have to use the passed accessor to retrive the needed column(s) and set data </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="class_h_f_s_qt_li_1_1_custom_fetch.html" title="Accessor passed to custom data type fetch An instance of this class will be passed as first parameter...">CustomFetch</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
